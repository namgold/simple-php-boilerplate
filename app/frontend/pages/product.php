<section class="ftco-section">
    <div class="container">
        <div class="row">
            <div class="col-md">
                <a href="#/" class="image-popup" id="image-popup"><img id="product-img" src="images/tham-360s-venus-2-lop-6mm-tim-1-600x600.jpg" class="img-fluid" alt="Colorlib Template"></a>
            </div>
            <div class="col-md product-details pl-md-5">
                <h4 id="product-title">Phasellus quis malesuada eros.</h4>
                <div class="rating d-flex">
                    <p class="text-left mr-4">
                        <a href="#" class="mr-2">5.0</a>
                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                    </p>
                    <p class="text-left mr-4">
                        <a href="#" class="mr-2" style="color: #000;">100 <span style="color: #bbb;">Đánh giá</span></a>
                    </p>
                    <p class="text-left">
                        <a href="#" class="mr-2" style="color: #000;">500 <span style="color: #bbb;">Đã bán</span></a>
                    </p>
                </div>
                <h3 id="product-price" >200000 đồng</h3>
                <p>
                        Cras dignissim, tellus eu sagittis lobortis, libero nunc fermentum diam, non fringilla nulla erat nec turpis. Cras aliquet pulvinar dolor nec ultrices. Vestibulum vehicula at augue eu porta. Curabitur cursus eu dui sit amet posuere. Vestibulum faucibus nec ante a fringilla. Nulla malesuada venenatis felis id fermentum. Nullam pharetra nisl et enim elementum auctor.
                </p>
                <p>
                        Integer mattis lacinia lacus in viverra. Quisque venenatis ex a turpis dictum, eu tincidunt felis varius. In hac habitasse platea dictumst. Etiam mattis sollicitudin venenatis. 
                </p>
                <p>
                        In scelerisque tempus leo, vel ultricies velit fringilla a. Vivamus viverra ipsum nec erat fermentum, nec sagittis turpis vulputate. Vestibulum sem ipsum, dictum vel turpis id, iaculis maximus enim. Curabitur ac quam aliquet, pulvinar libero a, eleifend magna. Curabitur dapibus a elit non euismod. Nam facilisis nulla ipsum, in rutrum nulla efficitur non.
                </p>
                <div class="input-group col-md-6 d-flex mb-3">
                        <span class="input-group-btn mr-2">
                            <button  type="button" class="quantity-left-minus btn"  data-type="minus" data-field="">
                            <div class="ion-ios-remove btn btn-warning" id="decrease" onclick="decreaseValue()" value="Decrease Value"></div>
                            </button>
                            </span>
                            <input type="text" name="quant[1]" class="quantity form-control input-number" value="1" min="0" max="10"> -->
                            <input type="text" id="quantity" name="quantity" class="form-control input-number" value="1" min="1" max="100">
                            <input type="number" id="number" name="quantity" class="form-control input-number" value="1" min="1" max="100">
                            <span class="input-group-btn ml-2">
                            <button  type="button" class="quantity-right-plus btn" data-type="plus" data-field=""> 
                            <i class="ion-ios-add btn btn-warning" id="increase" onclick="increaseValue()" value="Increase Value"></i>
                        </button> 
                        </span>
                </div>

                <div class="w-100"></div>
                <div class="col-md-12">
                    <p style="color: #000;">80 sản phẩm còn sẵn</p>
                </div>
                <p><a href="#/" onclick="addToCart()" class="btn btn-black py-3 px-5">Thêm vào giỏ hàng</a></p>
        </div>

    </div>
    <br>
    </section>


<section class="ftco-section bg-light">
        <div class="container">
                <div class="row justify-content-center mb-3 pb-3">
            <div class="col-md-12 heading-section text-center ftco-animate">
            <h2 class="mb-4">Sản phẩm tương tự</h2>
            </div>
        </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-sm col-md-6 col-lg ftco-animate">
                    <div class="product">
                        <a href="?id=03" class="img-prod"><img class="img-fluid" src="./images/luxury.jpg" alt="Colorlib Template">
                            <span class="status">30%</span>
                            <div class="overlay"></div>
                        </a>
                        <div class="text py-3 px-3">
                            <h3><a href="#">Liệu Trình Chăm Sóc Da Luxury</a></h3>
                            <div class="d-flex">
                                <div class="pricing">
                                    <p class="price"><span class="price-sale">290,000 đồng</span></p>
                                </div>
                                <div class="rating">
                                    <p class="text-right">
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                    </p>
                                </div>
                            </div>
                            <p class="bottom-area d-flex px-3">
                                <a href="#/" onclick="addToCart()" class="add-to-cart text-center py-2 mr-1"><span>Thêm vaò giỏ hàng <i class="ion-ios-add ml-1"></i></span></a>
                                <a href="cart.html" class="buy-now text-center py-2">Mua ngay<span><i class="ion-ios-cart ml-1"></i></span></a>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-sm col-md-6 col-lg ftco-animate">
                    <div class="product">
                        <a href="?id=08" class="img-prod"><img class="img-fluid" src="./images/tay.jpg" alt="Colorlib Template">
                            <div class="overlay"></div>
                        </a>
                        <div class="text py-3 px-3">
                            <h3><a href="#">Gel tẩy tế bào chết Laaskin</a></h3>
                            <div class="d-flex">
                                <div class="pricing">
                                    <p class="price"><span>350,000 đồng</span></p>
                                </div>
                                <div class="rating">
                                    <p class="text-right">
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                    </p>
                                </div>
                            </div>
                            <p class="bottom-area d-flex px-3">
                                <a href="#/" onclick="addToCart()" class="add-to-cart text-center py-2 mr-1"><span>Thêm vaò giỏ hàng <i class="ion-ios-add ml-1"></i></span></a>
                                <a href="cart.html" class="buy-now text-center py-2">Mua ngay<span><i class="ion-ios-cart ml-1"></i></span></a>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-sm col-md-6 col-lg ftco-animate">
                    <div class="product">
                        <a href="?id=01" class="img-prod"><img class="img-fluid" src="./images/huyetthanh.jpg" alt="Colorlib Template">
                            <div class="overlay"></div>
                        </a>
                        <div class="text py-3 px-3">
                            <h3><a href="#">Trị Mụn Huyết Thanh Tảo Biển</a></h3>
                            <div class="d-flex">
                                <div class="pricing">
                                    <p class="price"><span>195,000 đồng</span></p>
                                </div>
                                <div class="rating">
                                    <p class="text-right">
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                    </p>
                                </div>
                            </div>
                            <p class="bottom-area d-flex px-3">
                                <a href="#/" onclick="addToCart()" class="add-to-cart text-center py-2 mr-1"><span>Thêm vaò giỏ hàng <i class="ion-ios-add ml-1"></i></span></a>
                                <a href="cart.html" class="buy-now text-center py-2">Mua ngay<span><i class="ion-ios-cart ml-1"></i></span></a>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-sm col-md-6 col-lg ftco-animate">
                    <div class="product">
                        <a href="?id=12" class="img-prod"><img class="img-fluid" src="./images/nha.jpg" alt="Colorlib Template">
                            <div class="overlay"></div>
                        </a>
                        <div class="text py-3 px-3">
                            <h3><a href="#">Xịt khoáng nha đam Laaskin (Aloe Mineral Spray)</a></h3>
                            <div class="d-flex">
                                <div class="pricing">
                                    <p class="price"><span>790,000 đồng</span></p>
                                </div>
                                <div class="rating">
                                    <p class="text-right">
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                        <a href="#"><span class="ion-ios-star-outline"></span></a>
                                    </p>
                                </div>
                            </div>
                            <p class="bottom-area d-flex px-3">
                                <a href="#/" onclick="addToCart()" class="add-to-cart text-center py-2 mr-1"><span>Thêm vaò giỏ hàng <i class="ion-ios-add ml-1"></i></span></a>
                                <a href="cart.html" class="buy-now text-center py-2">Mua ngay<span><i class="ion-ios-cart ml-1"></i></span></a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script src="constant.js"></script>
        <script>

            const href = location.href.split('?').find(str => str.includes('id'));
            console.log(location.href);
            const id= href.split('=')[1];
            $(".add-to-cart").click(function(){
					prodId = id;
					additemLS(prodId);
				})
            const productdata = productData.find(prod => prod.id === id);
            if(!productdata) window.location="./index.html";
            else {
                document.getElementById('image-popup').setAttribute('href', productdata.img);
                document.getElementById('product-img').setAttribute('src', productdata.img);
            }
            $(document).ready(function () {
                $.ajax({
                    type: 'GET',
                    url:'http://localhost:8000/product?id='+id,

                }).done(function(response){
                    var res=response;
                    // const productdata = res.find(prod => prod.id === location.href.split('?').find(str => str.includes('id')).split('=')[1] );
                    document.getElementById('image-popup').setAttribute('href', productdata.img);
                    document.getElementById('product-img').setAttribute('src', productdata.img);
                    document.getElementById('product-title').innerHTML = res[0].name;
                    document.getElementById('product-price').innerHTML=res[0].price;
                })          
            })
            let _count = 0;
            let ele = document.getElementById("cart-count");
            ele.innerHTML = `[${_count}]`;
            function addToCart() {
                _count += 1;
                let ele = document.getElementById("cart-count");
                ele.innerHTML = `[${_count}]`;
                
            }
            function increaseValue() {
                var value = parseInt(document.getElementById('number').value, 10);
                value = isNaN(value) ? 0 : value;
                value++;
                document.getElementById('number').value = value;
                }

            function decreaseValue() {
                var value = parseInt(document.getElementById('number').value, 10);
                value = isNaN(value) ? 0 : value;
                value < 1 ? value = 1 : '';
                value--;
                document.getElementById('number').value = value;
            
            }
            function additemLS(id){
                var items = [];			
                if (localStorage.getItem("items") === null) {
                    items.push(id);
                    localStorage.setItem("items", JSON.stringify(items))
                }else{
                    var storedItems = JSON.parse(localStorage.getItem("items"));
                    if (storedItems.includes(id) == false){
                        storedItems.push(id);
                        localStorage.setItem("items", JSON.stringify(storedItems))
                    }
                }
		    }
        </script>